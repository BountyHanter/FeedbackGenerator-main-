## **Общая логика микросервисов**

Микросервисы реализованы по единому шаблону и предназначены для работы с конкретными платформами отзывов. На данный момент реализованы:

- **Микросервис 2ГИС**
- **Микросервис Флампа**
- **Частично реализован основной сервис (Django)**

Каждый микросервис выполняет следующие основные задачи:

1. **Авторизация на платформе**:
       - Получает логин и хэшированный пароль от основного сервиса.
     - Повторяет HTTP-запросы авторизации, как это делает обычный пользователь.
     - В случае успешной авторизации получает токен и информацию о филиалах, если это предусмотрено API платформы.
     - Если авторизация не удалась, возвращает код ошибки (например, `401`).

2. **Сбор отзывов**:
     - Основной сервис отправляет запрос на парсинг отзывов.
     - Микросервис собирает отзывы через HTTP-запросы и сохраняет их в свою базу данных.
     - Данные, которые хранятся в БД:
         - ID отзыва
         - Текст
         - Рейтинг
         - Дата
         - Автор (если доступно)
         - Фото (если доступно)
         - Количество лайков/дизлайков
         - Количество ответов
     - Основной сервис может запрашивать пачки отзывов по фильтрам (например, по дате, рейтингу или наличию ответов).
     - Если отзыв был изменён на платформе, при следующем парсинге обновлённые данные записываются в БД.

3. **Генерация и отправка ответов**:
     - Основной сервис отправляет в микросервис запрос на генерацию ответа.
     - Запрос передаётся в микросервис ChatGPT (пока не реализован).
     - Готовый ответ отправляется обратно в микросервис.
     - Отправка ответа на площадку выполняется через HTTP-запрос от микросервиса.

4. **Работа с жалобами**:
     - Если отзыв нарушает правила площадки, основной сервис может запросить подачу жалобы.
     - Жалоба отправляется через POST-запрос в API площадки, если такая возможность предусмотрена.
     - В будущем подача жалоб может быть автоматизирована через ChatGPT.

## **Обработка данных и взаимодействие**

- Все запросы между основным сервисом и микросервисами выполняются через HTTP.
- Данные о пользователях и их аккаунтах хранятся в основном сервисе, а сами отзывы — только в микросервисах.
- В будущем возможно выделение микросервиса для централизованного парсинга отзывов.

## **Эндпоинты**
Описание всех доступных эндпоинтов будет представлено в разделе API.

